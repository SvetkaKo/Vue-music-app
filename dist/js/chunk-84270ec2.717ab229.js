(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-84270ec2"],{"04d1":function(e,t,n){var r=n("342f"),o=r.match(/firefox\/(\d+)/i);e.exports=!!o&&+o[1]},"25f0":function(e,t,n){"use strict";var r=n("e330"),o=n("5e77").PROPER,a=n("6eeb"),c=n("825a"),s=n("3a9b"),i=n("577e"),u=n("d039"),d=n("ad6d"),b="toString",m=RegExp.prototype,l=m[b],f=r(d),h=u((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),g=o&&l.name!=b;(h||g)&&a(RegExp.prototype,b,(function(){var e=c(this),t=i(e.source),n=e.flags,r=i(void 0===n&&s(m,e)&&!("flags"in m)?f(e):n);return"/"+t+"/"+r}),{unsafe:!0})},"4e82":function(e,t,n){"use strict";var r=n("23e7"),o=n("e330"),a=n("59ed"),c=n("7b0b"),s=n("07fa"),i=n("577e"),u=n("d039"),d=n("addb"),b=n("a640"),m=n("04d1"),l=n("d998"),f=n("2d00"),h=n("512c"),g=[],p=o(g.sort),v=o(g.push),O=u((function(){g.sort(void 0)})),j=u((function(){g.sort(null)})),x=b("sort"),w=!u((function(){if(f)return f<70;if(!(m&&m>3)){if(l)return!0;if(h)return h<603;var e,t,n,r,o="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)g.push({k:t+r,v:n})}for(g.sort((function(e,t){return t.v-e.v})),r=0;r<g.length;r++)t=g[r].k.charAt(0),o.charAt(o.length-1)!==t&&(o+=t);return"DGBEFHACIJK"!==o}})),_=O||!j||!x||!w,y=function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:i(t)>i(n)?1:-1}};r({target:"Array",proto:!0,forced:_},{sort:function(e){void 0!==e&&a(e);var t=c(this);if(w)return void 0===e?p(t):p(t,e);var n,r,o=[],i=s(t);for(r=0;r<i;r++)r in t&&v(o,t[r]);d(o,y(e)),n=o.length,r=0;while(r<n)t[r]=o[r++];while(r<i)delete t[r++];return t}})},"512c":function(e,t,n){var r=n("342f"),o=r.match(/AppleWebKit\/(\d+)\./);e.exports=!!o&&+o[1]},"8dc3":function(e,t,n){"use strict";n.r(t);n("4e82"),n("b0c0");var r=n("7a23"),o={class:"w-full mb-8 py-14 text-center text-white relative"},a=Object(r["h"])("div",{class:"absolute inset-0 w-full h-full box-border bg-contain music-bg",style:{"background-image":"url(/assets/img/song-header.png)"}},null,-1),c={class:"container mx-auto flex items-center"},s=Object(r["h"])("i",{class:"fas fa-play"},null,-1),i=[s],u={class:"z-50 text-left ml-8"},d={class:"text-3xl font-bold"},b={class:"container mx-auto mt-6",id:"comments"},m={class:"bg-white rounded border border-gray-200 relative flex flex-col"},l={class:"px-6 pt-6 pb-5 font-bold border-b border-gray-200"},f={class:"card-title"},h=Object(r["h"])("i",{class:"fa fa-comments float-right text-green-400 text-2xl"},null,-1),g={class:"p-6"},p=["disabled"],v=Object(r["h"])("option",{value:"1"},"Latest",-1),O=Object(r["h"])("option",{value:"2"},"Oldest",-1),j=[v,O],x={class:"container mx-auto"},w={class:"mb-5"},_={class:"font-bold"};function y(e,t,n,s,v,O){var y=Object(r["G"])("vee-field"),k=Object(r["G"])("ErrorMessage"),C=Object(r["G"])("vee-form");return Object(r["A"])(),Object(r["g"])("main",null,[Object(r["h"])("div",null,[Object(r["h"])("section",o,[a,Object(r["h"])("div",c,[Object(r["h"])("button",{type:"button",onClick:t[0]||(t[0]=Object(r["U"])((function(t){return e.newSong(v.song)}),["prevent"])),class:"z-50 h-24 w-24 text-3xl bg-white text-black rounded-full focus:outline-none"},i),Object(r["h"])("div",u,[Object(r["h"])("div",d,Object(r["K"])(v.song.modified_name),1),Object(r["h"])("div",null,Object(r["K"])(v.song.genre),1)])])]),Object(r["h"])("section",b,[Object(r["h"])("div",m,[Object(r["h"])("div",l,[Object(r["h"])("span",f," Comments ("+Object(r["K"])(v.song.comment_count)+")",1),h]),Object(r["h"])("div",g,[e.userLoggedIn?(Object(r["A"])(),Object(r["e"])(C,{key:0,"validation-schema":v.schema,onSubmit:O.addComment},{default:Object(r["S"])((function(){return[v.comment_show_alert?(Object(r["A"])(),Object(r["g"])("div",{key:0,class:Object(r["t"])(["text-white text-center font-bold p-4 mb-4",v.comment_alert_variant])},Object(r["K"])(v.comment_alert_message),3)):Object(r["f"])("",!0),Object(r["k"])(y,{as:"textarea",name:"comment",class:"block w-full py-1.5 px-3 text-gray-800 border border-gray-300 transition duration-500 focus:outline-none focus:border-black rounded mb-4",placeholder:"Your comment here..."}),Object(r["k"])(k,{class:"text-red-600",name:"comment"}),Object(r["h"])("button",{type:"submit",class:"py-1.5 px-3 rounded text-white bg-green-600 block",disabled:v.comment_in_submission}," Submit ",8,p)]})),_:1},8,["validation-schema","onSubmit"])):Object(r["f"])("",!0),Object(r["T"])(Object(r["h"])("select",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return v.sort=e}),class:"block mt-4 py-1.5 px-3 text-gray-800 border border-gray-300 transition duration-500 focus:outline-none focus:border-black rounded"},j,512),[[r["N"],v.sort]])])])]),Object(r["h"])("ul",x,[(Object(r["A"])(!0),Object(r["g"])(r["a"],null,Object(r["F"])(O.sortedComments,(function(e){return Object(r["A"])(),Object(r["g"])("li",{class:"p-6 bg-gray-50 border border-gray-200",key:e.docID},[Object(r["h"])("div",w,[Object(r["h"])("div",_,Object(r["K"])(e.name),1),Object(r["h"])("time",null,Object(r["K"])(e.date),1)]),Object(r["h"])("p",null,Object(r["K"])(e.content),1)])})),128))])])])}var k=n("1da1"),C=n("5530"),A=(n("96cf"),n("fb6a"),n("d3b7"),n("25f0"),n("159b"),n("b79f")),S=n("5502"),D={name:"Song",data:function(){return{comments:[],sort:"1",song:{},schema:{comment:"required|min:3"},comment_in_submission:!1,comment_show_alert:!1,comment_alert_variant:"bg-blue-500",comment_alert_message:"Please wait! Your comment is being submitted:)"}},computed:Object(C["a"])(Object(C["a"])({},Object(S["e"])({userLoggedIn:function(e){return e.auth.userLoggedIn}})),{},{sortedComments:function(){var e=this;return this.comments.slice().sort((function(t,n){return"1"===e.sort?new Date(n.date)-new Date(t.date):new Date(t.date)-new Date(n.date)}))}}),created:function(){var e=this;return Object(k["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,A["c"].doc(e.$route.params.id).get();case 2:if(n=t.sent,n.exists){t.next=6;break}return e.$router.push({name:"home"}),t.abrupt("return");case 6:r=e.$route.query.sort,e.sort="1"===r||"2"===r?r:"1",e.song=n.data(),e.getComments();case 10:case"end":return t.stop()}}),t)})))()},methods:Object(C["a"])(Object(C["a"])({},Object(S["b"])(["newSong"])),{},{addComment:function(e,t){var n=this;return Object(k["a"])(regeneratorRuntime.mark((function r(){var o,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return o=t.resetForm,n.comment_in_submission=!0,n.comment_show_alert=!0,n.comment_alert_variant="bg-blue-500",n.comment_alert_message="Please wait! Your comment is being submitted:)",a={content:e.comment,date:(new Date).toString(),songID:n.$route.params.id,name:A["a"].currentUser.displayName,uid:A["a"].currentUser.uid},r.next=8,A["b"].add(a);case 8:return n.song.comment_count+=1,r.next=11,A["c"].doc(n.$route.params.id).update({comment_count:n.song.comment_count});case 11:n.getComments(),n.comment_in_submission=!1,n.comment_alert_variant="bg-green-500",n.comment_alert_message="Comment added!",o();case 16:case"end":return r.stop()}}),r)})))()},getComments:function(){var e=this;return Object(k["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,A["b"].where("songID","==",e.$route.params.id).get();case 2:n=t.sent,e.comments=[],n.forEach((function(t){e.comments.push(Object(C["a"])({docID:t.id},t.data()))}));case 5:case"end":return t.stop()}}),t)})))()}}),watch:{sort:function(e){e!==this.$route.query.sort&&this.$router.push({query:{sort:e}})}}},R=n("6b0d"),I=n.n(R);const K=I()(D,[["render",y]]);t["default"]=K},addb:function(e,t,n){var r=n("4dae"),o=Math.floor,a=function(e,t){var n=e.length,i=o(n/2);return n<8?c(e,t):s(e,a(r(e,0,i),t),a(r(e,i),t),t)},c=function(e,t){var n,r,o=e.length,a=1;while(a<o){r=a,n=e[a];while(r&&t(e[r-1],n)>0)e[r]=e[--r];r!==a++&&(e[r]=n)}return e},s=function(e,t,n,r){var o=t.length,a=n.length,c=0,s=0;while(c<o||s<a)e[c+s]=c<o&&s<a?r(t[c],n[s])<=0?t[c++]:n[s++]:c<o?t[c++]:n[s++];return e};e.exports=a},d998:function(e,t,n){var r=n("342f");e.exports=/MSIE|Trident/.test(r)},fb6a:function(e,t,n){"use strict";var r=n("23e7"),o=n("da84"),a=n("e8b5"),c=n("68ee"),s=n("861d"),i=n("23cb"),u=n("07fa"),d=n("fc6a"),b=n("8418"),m=n("b622"),l=n("1dde"),f=n("f36a"),h=l("slice"),g=m("species"),p=o.Array,v=Math.max;r({target:"Array",proto:!0,forced:!h},{slice:function(e,t){var n,r,o,m=d(this),l=u(m),h=i(e,l),O=i(void 0===t?l:t,l);if(a(m)&&(n=m.constructor,c(n)&&(n===p||a(n.prototype))?n=void 0:s(n)&&(n=n[g],null===n&&(n=void 0)),n===p||void 0===n))return f(m,h,O);for(r=new(void 0===n?p:n)(v(O-h,0)),o=0;h<O;h++,o++)h in m&&b(r,o,m[h]);return r.length=o,r}})}}]);
//# sourceMappingURL=chunk-84270ec2.717ab229.js.map